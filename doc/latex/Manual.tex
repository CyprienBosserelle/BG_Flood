\label{Manual_md_doc_Manual}%
\Hypertarget{Manual_md_doc_Manual}%

\begin{DoxyItemize}
\item \href{\#input-parameters}{\texttt{ Input Parameters}}
\begin{DoxyItemize}
\item \href{\#-bg-paramtxt-}{\texttt{ {\ttfamily BG\+\_\+param.\+txt}}}
\begin{DoxyItemize}
\item \href{\#how-to-use-the--bg-paramtxt--file}{\texttt{ How to use the {\ttfamily BG\+\_\+param.\+txt} file}}
\end{DoxyItemize}
\item \href{\#list-of-parameters}{\texttt{ List of Parameters}}
\item \href{\#bathymetrytopography-files}{\texttt{ Bathymetry/topography files}}
\begin{DoxyItemize}
\item \href{\#masking}{\texttt{ Masking}}
\end{DoxyItemize}
\item \href{\#boundaries}{\texttt{ Boundaries}}
\item \href{\#bottom-friction}{\texttt{ Bottom friction}}
\item \href{\#rivers-and-area-discharge}{\texttt{ Rivers and Area discharge}}
\item \href{\#wind-atm-pressure-forcing}{\texttt{ Wind atm pressure forcing}}
\item \href{\#output-variables}{\texttt{ Output variables}}
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{Manual_autotoc_md104}{}\doxysection{Input Parameters}\label{Manual_autotoc_md104}
\hypertarget{Manual_autotoc_md105}{}\doxysubsection{$<$tt$>$\+BG\+\_\+param.\+txt$<$/tt$>$}\label{Manual_autotoc_md105}
All the model inputs are controlled by the BG\+\_\+param.\+txt file. It is a simple text file that contains the parameters of the model that the user wishes to change.\hypertarget{Manual_autotoc_md106}{}\doxysubsubsection{How to use the $<$tt$>$\+BG\+\_\+param.\+txt$<$/tt$>$ file}\label{Manual_autotoc_md106}
\mbox{\hyperlink{structModel}{Model}} parameters can be modified in the file by specifying the parameter name, the equal sign, the desired value(s) for the parameter and optionally a semi-\/column ; 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#My Dummy BG\_param files}}
\DoxyCodeLine{\textcolor{preprocessor}{\#Any lines starting with the Hash tag will be ignored}}
\DoxyCodeLine{\textcolor{preprocessor}{\#You can also leave blank lines}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\# Parameter order does not really matter but if you specify a parameter twice the first value will be overwritten}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\# You can only put one parameter per line}}
\DoxyCodeLine{bathy = mybathyfile.nc}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#Any number of leading space or space between the parameter name and the equal sign will be accepted. Tabs are not acceptable}}
\DoxyCodeLine{    theta       =      1.0}
\DoxyCodeLine{\textcolor{preprocessor}{\#Obviously you have to put the right name down (spelling and not case sensitive) otherwise the line will be ignored}}
\DoxyCodeLine{tteettaa = 1.22}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#If you want to add a comment at the end of a line with a parameter you can do it after putting a semi column e.g.:}}
\DoxyCodeLine{CFL = 9; Was 0.5 but I don\textcolor{stringliteral}{'t know what I'}m doing}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#The model has only one required parameter and that is the (level 0) bathymetry grid name}}

\end{DoxyCode}
 \hypertarget{Manual_autotoc_md107}{}\doxysubsubsection{General comment about input files}\label{Manual_autotoc_md107}
Some parameters expect a filename (e.\+g. {\ttfamily bathy}). While the model will accept any extension there are a couple of requirement. For spatially varying inputs, the extension controls how the file is read. You can use ESRI ascii grids {\ttfamily .asc}, mid-\/depth files {\ttfamily .md} or Net\+CDF {\ttfamily .nc}. Net\+CDF files are recommended and expected to have the {\ttfamily .nc} extension. Since Net\+CDF files can have several variables you can enforce (recommended) the variable being read by appending {\ttfamily ?var} to the file name (e.\+g. {\ttfamily bathy = mybathyfile.\+nc?z}).

For spatially and temporally varying input (e.\+g. wind or atmospheric pressure) a/multiple Net\+CDF file with a 3D variable is expected (see \href{\#wind-atm-pressure-forcing}{\texttt{ here}}).

Where the file input is a timeserie (e.\+g. boundary forcing), then the file extension is ignored but a text file is expected.\hypertarget{Manual_autotoc_md108}{}\doxysubsection{List of Parameters}\label{Manual_autotoc_md108}
Remember that the only required parameter to run the model is the bathymetry file. But if you want to run something fun you will need to specify boundary conditions, initial conditions and/or some forcings.\hypertarget{Manual_autotoc_md109}{}\doxysubsubsection{Input}\label{Manual_autotoc_md109}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
bathy (or depfile)   &\PBS\centering Bathy file name. See below for details   &\PBS\raggedleft {\itshape No Default values}    \\\cline{1-3}
gpudevice (or GPUDEVICE)   &\PBS\centering Define which GPU device to use (use -\/1 for CPU)   &\PBS\raggedleft 0 (default GPU)    \\\cline{1-3}
doubleprecision   &\PBS\centering if == 1 use double precision solver and math otherwise use float (much faster)   &\PBS\raggedleft 0    \\\cline{1-3}
mask   &\PBS\centering remove blocks from computation where the bathy/topo is larger than mask value (default no area are masked). see below for more details   &\PBS\raggedleft 9999.\+0    \\\cline{1-3}
nx   &\PBS\centering Initial/input grid size (number of nodes) in x direction   &\PBS\raggedleft 0    \\\cline{1-3}
ny   &\PBS\centering Initial/input grid size (number of nodes) in y direction   &\PBS\raggedleft 1    \\\cline{1-3}
dx   &\PBS\centering Initial/input grid resolution (\mbox{[}m\mbox{]} for metric grid or \mbox{[}decimal degree\mbox{]} for spherical grids)   &\PBS\raggedleft 0.\+0    \\\cline{1-3}
grdalpha   &\PBS\centering grid rotation \mbox{[}degrees clockwise of North for Y axis\mbox{]}   &\PBS\raggedleft 0.\+0    \\\cline{1-3}
xo   &\PBS\centering grid origin in x direction \mbox{[}m\mbox{]} or \mbox{[}decimal degree\mbox{]} if spherical ==1   &\PBS\raggedleft 0.\+0    \\\cline{1-3}
yo   &\PBS\centering grid origin in y direction \mbox{[}m\mbox{]} or \mbox{[}decimal degree\mbox{]} if spherical ==1   &\PBS\raggedleft 0.\+0   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md110}{}\doxysubsubsection{Forcing/\+Boundary}\label{Manual_autotoc_md110}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
left   &\PBS\centering Specify left boundary type (see below for details)   &\PBS\raggedleft 1    \\\cline{1-3}
right   &\PBS\centering Specify right boundary type (see below for details)   &\PBS\raggedleft 1    \\\cline{1-3}
bot   &\PBS\centering Specify bottom boundary type (see below for details)   &\PBS\raggedleft 1    \\\cline{1-3}
top   &\PBS\centering Specify top boundary type (see below for details)   &\PBS\raggedleft 1    \\\cline{1-3}
initzs (or zsinit)   &\PBS\centering Initial water level. The initial water level is calculated as a inverse distance to the value at the boundary use this parameter to define the initial water level if no boundaries or hotstart file are specified (e.\+g. for a lake)   &\PBS\raggedleft -\/999    \\\cline{1-3}
hotstartfile   &\PBS\centering Netcdf file containing initial conditions either or a combination of u ,v ,zs ,hh and/or zb   &\PBS\raggedleft no file    \\\cline{1-3}
deformfile   &\PBS\centering Netcdf file containing initial deformation from a tsunami. this deformation is applied to both the topography and water levels (Not Yet Implemented)   &\PBS\raggedleft no file    \\\cline{1-3}
hotstep   &\PBS\centering Step (in the time dimension?) to read hotstart condition in hotstart file.   &\PBS\raggedleft 0 (i.\+e. first)    \\\cline{1-3}
frictionmodel   &\PBS\centering Flag to tell the model which friction model is used. 1\+: Quadratic (is cf is fixed); 2\+: Smart 2017 manning style bottom friction safe for very shallow water (in this case the parameter cf is actually z0)   &\PBS\raggedleft 0    \\\cline{1-3}
cfmap or roughnessmap   &\PBS\centering Input grid of either cf or z0 values (the same dimension as the input bathymetry)   &\PBS\raggedleft default value    \\\cline{1-3}
windfiles   &\PBS\centering Wind forcing files containing wind speed in u and v direction. See below for details   &\PBS\raggedleft no files    \\\cline{1-3}
atmpfile   &\PBS\centering Atmospheric forcing file (in netcdf format) containing atmospheric pressure in Pa.   &\PBS\raggedleft no file    \\\cline{1-3}
Pa2m   &\PBS\centering Conversion between atmospheric pressure changes to water level changes   &\PBS\raggedleft 0.\+00009916    \\\cline{1-3}
Paref   &\PBS\centering Reference atmospheric pressure in Pa.   &\PBS\raggedleft 10130.\+0   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md111}{}\doxysubsubsection{Hydrodynamics}\label{Manual_autotoc_md111}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
eps   &\PBS\centering model drying height \mbox{[}m\mbox{]}   &\PBS\raggedleft 0.\+0001    \\\cline{1-3}
cf   &\PBS\centering model bottom friction (see below for details)   &\PBS\raggedleft 0.\+0001    \\\cline{1-3}
Cd   &\PBS\centering Wind drag coefficient   &\PBS\raggedleft 0.\+002    \\\cline{1-3}
CFL   &\PBS\centering CFL criterium between 0 and 1. Higher values may make the model unstable   &\PBS\raggedleft 0.\+5    \\\cline{1-3}
river   &\PBS\centering 5 parameters (comma separated) to define Point/area discharge in the model see below for details   &\PBS\raggedleft No rivers   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md112}{}\doxysubsubsection{Time keeping}\label{Manual_autotoc_md112}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
CFL   &\PBS\centering CFL criterium between 0 and 1. Higher values may make the model unstable   &\PBS\raggedleft 0.\+5    \\\cline{1-3}
outputtimestep (or outtimestep)   &\PBS\centering time step between model output in s   &\PBS\raggedleft 0.\+0 (no output)    \\\cline{1-3}
endtime   &\PBS\centering time when the model stops s   &\PBS\raggedleft 0.\+0 (model will initialise but not run)    \\\cline{1-3}
totaltime   &\PBS\centering time at the start of the model s   &\PBS\raggedleft 0.\+0   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md113}{}\doxysubsubsection{Output}\label{Manual_autotoc_md113}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
outfile   &\PBS\centering netcdf output file name (if the file already exist a number will be appended to the filename and no file will be overwritten)   &\PBS\raggedleft Output.\+nc    \\\cline{1-3}
outvars   &\PBS\centering List (comma separated) of variable to output to the netcdf file See below for details   &\PBS\raggedleft no variable    \\\cline{1-3}
TSOfile   &\PBS\centering Filename for timeseries output   &\PBS\raggedleft no output    \\\cline{1-3}
resetmax   &\PBS\centering if ==1 reset max variables after each output   &\PBS\raggedleft 0    \\\cline{1-3}
smallnc   &\PBS\centering Flag for saving output as short integer. This reduces the size of output file (see scalefactor and addoffset below)   &\PBS\raggedleft 1    \\\cline{1-3}
scalefactor   &\PBS\centering Scale factor applied to output before saving as short integer. This follows the COARDS convention\+: {\ttfamily packed\+\_\+data\+\_\+value = nint((unpacked\+\_\+data\+\_\+value -\/ add\+\_\+offset) / scale\+\_\+factor)}   &\PBS\raggedleft 0.\+01    \\\cline{1-3}
addoffset   &\PBS\centering Offset applied to output before saving as short integer. This follows the COARDS convention\+: {\ttfamily packed\+\_\+data\+\_\+value = nint((unpacked\+\_\+data\+\_\+value -\/ add\+\_\+offset) / scale\+\_\+factor)}   &\PBS\raggedleft 0.\+0    \\\cline{1-3}
posdown   &\PBS\centering switch to tell the modle that input grid is positive down. if podown==1 the input grid will be multiplied by -\/1.\+0 to transform to positive up   &\PBS\raggedleft 0   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md114}{}\doxysubsubsection{Miscelanious}\label{Manual_autotoc_md114}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter (synonyms)   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Default Value    }\\\cline{1-3}
\endhead
g   &\PBS\centering acceleration of gravity \mbox{[}m/s2\mbox{]}   &\PBS\raggedleft 9.\+81    \\\cline{1-3}
rho   &\PBS\centering fluid density \mbox{[}kg/m3\mbox{]}   &\PBS\raggedleft 1025.\+0    \\\cline{1-3}
spherical   &\PBS\centering switch to run the model in spherical (geographical) coordinates. This implies that the computation will occur in double precision   &\PBS\raggedleft 0    \\\cline{1-3}
Radius   &\PBS\centering Earth radius used to calculate spherical grid corrections \mbox{[}m\mbox{]}   &\PBS\raggedleft 6371220.\+0   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md115}{}\doxysubsection{Bathymetry/topography files}\label{Manual_autotoc_md115}
Input bathymetry data as a regular grid using {\ttfamily .asc}, {\ttfamily .nc}, {\ttfamily .md}. This is a required parameter that ultimately also defines the extend of the model domain and model resolution.

{\ttfamily bathy = My\+\_\+bathy\+\_\+file.\+asc}

the correct way of reading the file will be dedicated by the file extension. For {\ttfamily .nc} (netcdf) files you can specify the name of the variable in the file as\+: {\ttfamily mybathyfile.\+nc?myvar} (will look for {\ttfamily zb} if none are specified).

This input file is critical as it defines the extent of the model grid and the base resolution in the model. (The model is not adaptive yet but this is still relevant for the extent of the model.)\hypertarget{Manual_autotoc_md116}{}\doxysubsection{Conputational mesh}\label{Manual_autotoc_md116}
BG-\/\+Flood generates its own mesh. By default, it is a quad regular mesh based on the DEM (Digital Elevation \mbox{\hyperlink{structModel}{Model}}) extend and resolution. The extend of the mesh and resolution of the mesh can be modify by the user. The mesh can also be refined/coarsen in areas or following patterns prescribed by the user.\hypertarget{Manual_autotoc_md117}{}\doxysubsubsection{Adaptative mesh}\label{Manual_autotoc_md117}
\hypertarget{Manual_autotoc_md118}{}\doxysubsubsection{Masking}\label{Manual_autotoc_md118}
Parts of the input bathymetry can be masked and excluded from the computation. The model extent (and locations of side boundaries) will remain the same but entire blocks can be removed from the computational memory. These area will appear as NaN in the output file. The input grid is first devided in blocks of 16x16. If all the value within a block exceed the mask value (9999 as default) then that block is excluded from memory and no computation will occur there.

There are no fancy treatment of the boundaries of masked blocks so it is safer to select a mask threshold ({\ttfamily mask}) to keep most of the masked are dry. If water tries to cross to a masked block, The boundary of blocks are treated as Neumann (no gradient) boundaries so the bathymetry of the 2 cells adjacent to a masked block are set to the same value (the value of the second cell removed from the masked block).\hypertarget{Manual_autotoc_md119}{}\doxysubsection{Boundaries}\label{Manual_autotoc_md119}
Four type of boundaries can be applied at the edge of the model. By default neumann (no perpendicular gradient) is applied.

0. No slip (wall)
\begin{DoxyEnumerate}
\item Neumann
\item dirichlets (water level )
\item Absorbing (only 1D/perpendicular absorbion is implemented)
\item $\sim$$\sim$ 2D Absorbing$\sim$$\sim$ (Not implemented yet)
\end{DoxyEnumerate}

For Boundary type 2 and 3 (Dirichlet and Absorbing) the level at the boundary level is imposed from a file so a file needs to be sepcified\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{left = 1;}
\DoxyCodeLine{right = 3;}
\DoxyCodeLine{rightbndfile = mybndfile.txt}
\DoxyCodeLine{top = 3;}
\DoxyCodeLine{topbndfile = mybndfile.txt}

\end{DoxyCode}
\hypertarget{Manual_autotoc_md120}{}\doxysubsubsection{Boundary file (for type 2 or 3)}\label{Manual_autotoc_md120}
Water level boundary file are needed to type 2 nd 3 boundaries. The files are 2 (or more) column one with time in the first column and water level is the other(s). Note that the time step in the file doesn\textquotesingle{}t need to be constant. The model will linearly interpolated between steps in the file. The file can be either comma separated or tab separated. This is automatically detected.\hypertarget{Manual_autotoc_md121}{}\doxyparagraph{Uniform boundary file}\label{Manual_autotoc_md121}
For uniform boundary condition (along the boundary axis) the files needs to be 2 column\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\# Water level boundary}}
\DoxyCodeLine{0.0  1.2}
\DoxyCodeLine{3600.0  1.2}
\DoxyCodeLine{36000.0  1.22}
\DoxyCodeLine{36060.0  1.25}
\DoxyCodeLine{36120.0  1.24}

\end{DoxyCode}
\hypertarget{Manual_autotoc_md122}{}\doxyparagraph{Variable boundary file}\label{Manual_autotoc_md122}
For Variable boundary condition (along the boundary axis) the files needs to be 3+ columns. The boundary axis is then divided by the number of boundary column and the water level is interpolated between location. for example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\# Water level boundary}}
\DoxyCodeLine{0.0  1.2 0.0}
\DoxyCodeLine{3600.0  1.2 0.0}
\DoxyCodeLine{36000.0  1.22 0.0}
\DoxyCodeLine{36060.0  1.25 0.0}
\DoxyCodeLine{36120.0  1.24 0.0}

\end{DoxyCode}


Here the the water level on the near-\/end of the boundary (left for bottom and top bnds; bottom for left and right bnds) axis will vary between 1.\+2 and 1.\+25 but the far-\/end (right for bottom and top bnd and top for left and right bnds) will remain constant at 0.\+0.

Here is an example with 3 water level column\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{ \# Water level boundary}}
\DoxyCodeLine{0.0 0.0 1.2 0.0}
\DoxyCodeLine{3600.0 0.0 1.2 0.0}
\DoxyCodeLine{36000.0 0.0 1.2 0.0}
\DoxyCodeLine{36060.0 0.0 1.2 0.0}
\DoxyCodeLine{36120.0 0.0 1.2 0.0 }

\end{DoxyCode}


In this case both near and far end of the boundary axis will remain zero and the center of the boundary axis will be 1.\+2m.\hypertarget{Manual_autotoc_md123}{}\doxysubsection{Bottom friction}\label{Manual_autotoc_md123}
Bottom friction is applied implicitly in the model (applied to velocities after momentum and continuity equations are solved). There are 3 friction equations implemented defined in {\ttfamily BG\+\_\+param.\+txt} as {\ttfamily frictionmodel =}\+:


\begin{DoxyItemize}
\item 0 Quadratic
\item 1 Smart
\item -\/1 Mannings
\end{DoxyItemize}

{\ttfamily frictionmodel = 0} (i.\+e. Quadratic friction is the default with a uniform friction coefficient {\ttfamily cf = 0.\+001}. If a uniform friction is required add {\ttfamily cf=} to your {\ttfamily BG\+\_\+param.\+txt} with the desired value. {\ttfamily cf} keyword is also used for the z0 of Smart formulation and n of the manning formulation.

For non-\/uniform friction parameter use the keyword {\ttfamily cfmap} or {\ttfamily roughnessmap} and assign an {\ttfamily .asc} or {\ttfamily .nc} file. for nc files you may need to supply the netcdf variable name. e.\+g. {\ttfamily cfmap=final\+\_\+rough.\+nc?zo}. The roughness grid does not need to match the model grid dimension and coarser friction grid will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value).\hypertarget{Manual_autotoc_md124}{}\doxysubsection{Rivers and Area discharge}\label{Manual_autotoc_md124}
At this stage river can only be added to the model as a vertical discharge where the water is added to a rectangle on the model with no velocity. To add rivers add a line per river with the parameters\+: {\ttfamily river = Fluxfile,xstart,xend,ystart,yend;} where {\ttfamily Fluxfile} is a 2 column text file containing time and dicharge in m3/s; {\ttfamily xstart} is the left coordinate of the square where the vertical discharge is applied, {\ttfamily xend} is the right coordinate of the square, {\ttfamily ystart} is the bottom coordinate of the square and {\ttfamily yend} is the top coordinate of the square. Example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{river = Votualevu\_R.txt,1867430,1867455,3914065,3914090;}
\DoxyCodeLine{river = Mulomulo\_R.txt,1867052,1867072,3911853,3911873;}

\end{DoxyCode}
\hypertarget{Manual_autotoc_md125}{}\doxysubsection{Wind atm pressure forcing}\label{Manual_autotoc_md125}
\hypertarget{Manual_autotoc_md126}{}\doxysubsubsection{Wind forcing (may contain bugs)}\label{Manual_autotoc_md126}
The hydrodynamics can be forced using a linear wind drag. the linear drag can be influenced with the keyword {\ttfamily Cd}. wind input is defined with the keyword {\ttfamily windfiles=}. There are several ways to use the keyword. \hypertarget{Manual_autotoc_md127}{}\doxyparagraph{spatially uniform txt file\+: $<$tt$>$windfiles=mywind.\+txt$<$/tt$>$}\label{Manual_autotoc_md127}
where {\ttfamily mywind.\+txt} is a text file with 3 column (time (in s), wind speed (m/s) and wind direction(degree North)). If the gris is in acoordinate system rotated from the north and a {\ttfamily grdalpha} is specified, the wind will be automatically rotated to the grid orientation.\hypertarget{Manual_autotoc_md128}{}\doxyparagraph{Spatially and time varying input $<$tt$>$windfiles=mywind.\+nc?uw,mywind.\+nc?vw$<$/tt$>$}\label{Manual_autotoc_md128}
Here two arguments separated with a comma are expected. The first argument is the netcdf file and variable name containing the U component of the wind (Along the X axis) and the second argument is the netcdf file and variable name containing the V component of the wind (Along the Y axis). Both can be in the same netcdf file as in the example. Separate netcdf file name and variable name with a {\ttfamily ?} similarly to other netcdf input option. The dimension of the wind forcing grid does not need to match the model grid dimension and coarser forcing will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value).\hypertarget{Manual_autotoc_md129}{}\doxysubsubsection{Atmospheric pressure forcing}\label{Manual_autotoc_md129}
Spatially constant atmospheric pressure forcing is not relevant so only spatially varying forcing is feasable. like for the wind this is done through a netcdf file\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{atmpfile=myncfile.nc?atmpres}

\end{DoxyCode}
 The forcing pressure is expected to be in Pa and the effect of the atmospheric pressure gradient is calculated as the difference to a reference pressure {\ttfamily Paref=101300.\+0} converted to a height using {\ttfamily Pa2m=0..00009916}. If using h\+Pa your will need to also change the reference pressure to {\ttfamily Paref=1013.\+0} and the conversion parameter to {\ttfamily Pa2m=0.\+009916}. As with the wind forcing, the forcing grid does not need to match the model grid dimension and coarser forcing will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value).\hypertarget{Manual_autotoc_md130}{}\doxysubsection{Output variables (\+Not up to date!!!)}\label{Manual_autotoc_md130}
\hypertarget{Manual_autotoc_md131}{}\doxysubsubsection{Snapshot outputs}\label{Manual_autotoc_md131}
\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endhead
u   &\PBS\centering U velocity (at cell center) zonal velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
v   &\PBS\centering V velocity (at cell center) meridional velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
vort   &\PBS\centering Vorticity   &\PBS\raggedleft \mbox{[}rotation/s\mbox{]}    \\\cline{1-3}
h   &\PBS\centering water depth at cell center   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zs   &\PBS\centering Water level elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zb   &\PBS\centering Topography elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md132}{}\doxysubsubsection{Mean/averaged output between output steps}\label{Manual_autotoc_md132}
This is for averaging variables in between output steps, useful for mean tidal flow calculation that averages out vortices. The average time is {\ttfamily outtimestep}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endhead
umean   &\PBS\centering Averaged U velocity (at cell center) zonal velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
vmean   &\PBS\centering Averaged V velocity (at cell center) meridional velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
hmean   &\PBS\centering Averaged water depth at cell center   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zsmean   &\PBS\centering Averaged Water level elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md133}{}\doxysubsubsection{Max output}\label{Manual_autotoc_md133}
The max can be calculated for the overall simulation (default) or between output steps ({\ttfamily resetmax = 1;})

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endhead
umax   &\PBS\centering Maximum U velocity (at cell center) zonal velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
vmax   &\PBS\centering Maximum V velocity (at cell center) meridional velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
hmax   &\PBS\centering Maximum water depth at cell center   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zsmax   &\PBS\centering Maximum Water level elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md134}{}\doxysubsubsection{Risk assesment related output}\label{Manual_autotoc_md134}
These variable are used to evaluate the damage resulting from the innundation.

put Udh / twet / ...

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endhead
umax   &\PBS\centering Maximum U velocity (at cell center) zonal velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
vmax   &\PBS\centering Maximum V velocity (at cell center) meridional velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
hmax   &\PBS\centering Maximum water depth at cell center   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zsmax   &\PBS\centering Maximum Water level elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md135}{}\doxysubsubsection{Infiltration outputs}\label{Manual_autotoc_md135}
The quatity of water that infiltrate in the ground using the ILCL model is saved, as a cumulated variable in\+:

put Udh / twet / ...

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Parameter   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Definition   }&\PBS\raggedleft \cellcolor{\tableheadbgcolor}\textbf{ Unit    }\\\cline{1-3}
\endhead
umax   &\PBS\centering Maximum U velocity (at cell center) zonal velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
vmax   &\PBS\centering Maximum V velocity (at cell center) meridional velocity positive right   &\PBS\raggedleft \mbox{[}m/s\mbox{]}    \\\cline{1-3}
hmax   &\PBS\centering Maximum water depth at cell center   &\PBS\raggedleft \mbox{[}m\mbox{]}    \\\cline{1-3}
zsmax   &\PBS\centering Maximum Water level elevation above datum   &\PBS\raggedleft \mbox{[}m\mbox{]}   \\\cline{1-3}
\end{longtabu}
\hypertarget{Manual_autotoc_md136}{}\doxysubsubsection{Other gradients and intermediate terms of the equations}\label{Manual_autotoc_md136}
\char`\"{}dhdx\char`\"{},\char`\"{}dhdy\char`\"{},\char`\"{}dzsdx\char`\"{},\char`\"{}dzsdy\char`\"{},\char`\"{}dudx\char`\"{},\char`\"{}dudy\char`\"{},\char`\"{}dvdx\char`\"{},\char`\"{}dvdy\char`\"{},\char`\"{}\+Fhu\char`\"{},\char`\"{}\+Fhv\char`\"{},\char`\"{}\+Fqux\char`\"{},\char`\"{}\+Fqvy\char`\"{},\char`\"{}\+Fquy\char`\"{},\char`\"{}\+Fqvx\char`\"{},\char`\"{}\+Su\char`\"{},\char`\"{}\+Sv\char`\"{},\char`\"{}dh\char`\"{},\char`\"{}dhu\char`\"{},\char`\"{}dhv\char`\"{},\char`\"{}cf\char`\"{}~\newline
$\vert$ 