
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for BG_Flood, a C++ library for flood fill algorithms.">
      
      
      
        <link rel="canonical" href="https://mydomain.org/mysite/Manual/">
      
      
        <link rel="prev" href="../ParametersList-py/">
      
      
        <link rel="next" href="../Tutorial_intro/">
      
      
      <link rel="icon" href="../logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Manual - BG_Flood Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#manual" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="BG_Flood Documentation" class="md-header__button md-logo" aria-label="BG_Flood Documentation" data-md-component="logo">
      
  <img src="../Logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BG_Flood Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Manual
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/CyprienBosserelle/BG_Flood" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    BG_Flood on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="BG_Flood Documentation" class="md-nav__button md-logo" aria-label="BG_Flood Documentation" data-md-component="logo">
      
  <img src="../Logo_white.png" alt="logo">

    </a>
    BG_Flood Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CyprienBosserelle/BG_Flood" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    BG_Flood on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TMP Examples of Mkdocs material
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ParametersList-py/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parameters list
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-controls" class="md-nav__link">
    <span class="md-ellipsis">
      Model controls
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bg_paramtxt" class="md-nav__link">
    <span class="md-ellipsis">
      BG_param.txt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BG_param.txt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-use-the-bg_paramtxt-file" class="md-nav__link">
    <span class="md-ellipsis">
      How to use the BG_param.txt file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#general-comment-about-input-files" class="md-nav__link">
    <span class="md-ellipsis">
      General comment about input files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      List of Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bathymetrytopography-files" class="md-nav__link">
    <span class="md-ellipsis">
      Bathymetry/topography files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conputational-mesh" class="md-nav__link">
    <span class="md-ellipsis">
      Conputational mesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conputational mesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#masking" class="md-nav__link">
    <span class="md-ellipsis">
      Masking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boundaries" class="md-nav__link">
    <span class="md-ellipsis">
      Boundaries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Boundaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boundary-file-for-type-2-or-3" class="md-nav__link">
    <span class="md-ellipsis">
      Boundary file (for type 2 or 3)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Boundary file (for type 2 or 3)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uniform-boundary-file" class="md-nav__link">
    <span class="md-ellipsis">
      Uniform boundary file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-boundary-file" class="md-nav__link">
    <span class="md-ellipsis">
      Variable boundary file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bottom-friction" class="md-nav__link">
    <span class="md-ellipsis">
      Bottom friction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rivers-and-area-discharge" class="md-nav__link">
    <span class="md-ellipsis">
      Rivers and Area discharge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wind-atm-pressure-forcing" class="md-nav__link">
    <span class="md-ellipsis">
      Wind atm pressure forcing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wind atm pressure forcing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wind-forcing-may-contain-bugs" class="md-nav__link">
    <span class="md-ellipsis">
      Wind forcing (may contain bugs)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wind forcing (may contain bugs)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spatially-uniform-txt-file" class="md-nav__link">
    <span class="md-ellipsis">
      spatially uniform txt file:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatially-and-time-varying-input" class="md-nav__link">
    <span class="md-ellipsis">
      Spatially and time varying input
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atmospheric-pressure-forcing" class="md-nav__link">
    <span class="md-ellipsis">
      Atmospheric pressure forcing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#map-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Map outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-snapshot-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Default snapshot outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complementary-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Complementary variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#meanaveraged-output-between-output-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Mean/averaged output between output steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#max-output" class="md-nav__link">
    <span class="md-ellipsis">
      Max output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risk-assesment-related-output" class="md-nav__link">
    <span class="md-ellipsis">
      Risk assesment related output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-related-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Model related outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-gradients-and-intermediate-terms-of-the-equations" class="md-nav__link">
    <span class="md-ellipsis">
      Other gradients and intermediate terms of the equations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#point-or-time-serie-output" class="md-nav__link">
    <span class="md-ellipsis">
      Point or Time-Serie output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adaptative-grid" class="md-nav__link">
    <span class="md-ellipsis">
      Adaptative grid
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/TutorialRiver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coastal fluvial flooding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/TutorialJetJulia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jet and Julia
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/Gaussian_Wave_Julia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gaussian wave
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/Transpacific_tsunami/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transpacific tsunami
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/TutorialMonaiJulia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monai and Julia
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/RainLoss_ILCL-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ground infiltration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/NewGradient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New Gradient Method
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules/Wetdryfix-Conservelevation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wet-dry fix
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../References/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Code sources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Code sources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/links/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Links
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/annotated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/classes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/hierarchy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hierarchy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/class_members/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Members
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/class_member_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/class_member_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/class_member_typedefs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Typedefs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/class_member_enums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Enumerations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Namespaces
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            Namespaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespace_members/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Members
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespace_member_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespace_member_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespace_member_typedefs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Typedefs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/namespace_member_enums/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Member Enumerations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/macros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Macros
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BGFlood/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div><h1 id="manual">Manual</h1>
<p>BG_Flood is a hydrodynamics model for simulating 2D depth-averaged flow. The following manual describes how to use the model but does not go into details about the model equations.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This manual is under revision and not up-to-date with the last version of the code.
Please, use the Parameters and Forcings list as a reference</p>
</div>
<!--
- [Input Parameters](#input-parameters)
  * [`BG_param.txt`](#-bg-paramtxt-)
    + [How to use the `BG_param.txt` file](#how-to-use-the--bg-paramtxt--file)
  * [List of Parameters](#list-of-parameters)
  * [Bathymetry/topography files](#bathymetrytopography-files)
  * [Computational mesh](#masking)
  * [Boundaries](#boundaries)
  * [Bottom friction](#bottom-friction)
  * [Rivers and Area discharge](#rivers-and-area-discharge)
  * [Wind and atmospheric pressure forcing](#wind-atm-pressure-forcing)
  * [Outputs](#output-variables)
-->

<h2 id="model-controls">Model controls</h2>
<p>BG_Flood model reads an instruction file (or <em>param</em> file) that tells the model what to do and what forcing files to read. when instructions are not explicitely given the model will use the default value. How to use the param file is important for making BG_Flood do what you want it to do.</p>
<p>By default this instruction file is called <code>BG_param.txt</code>.</p>
<h3 id="bg_paramtxt">BG_param.txt</h3>
<p>All the model inputs are controlled by the <code>BG_param.txt</code> file. It is a simple text file that contains the parameters of the model that the user wishes to change. While it is easy to build such file manually but also it is easy to use script and/or programming language to generate and modify text file to automatically to build and run many simulations.</p>
<h4 id="how-to-use-the-bg_paramtxt-file">How to use the BG_param.txt file</h4>
<p>Model parameters can be modified in the file by specifying the parameter name, the equal sign, the desired value(s) for the parameter and optionally a semi-column :
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>#My Dummy BG_param files
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>#Any lines starting with the Hash tag will be ignored
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>#You can also leave blank lines
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a># Parameter order does not really matter but if you specify a parameter twice the first value will be overwritten
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a># You can only put one parameter per line
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>bathy = mybathyfile.nc
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>#Any number of leading space or space between the parameter name and the equal sign will be accepted. Tabs are not acceptable
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    theta       =      1.0
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>#Obviously you have to put the right name down (spelling and not case sensitive) otherwise the line will be ignored
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>tteettaa = 1.22
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>#If you want to add a comment at the end of a line with a parameter you can do it after putting a semi column e.g.:
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>CFL = 9; Was 0.5 but I don't know what I'm doing
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>#The model has only one required parameter and that is the (level 0) bathymetry grid name
</span></code></pre></div>
<h3 id="general-comment-about-input-files">General comment about input files</h3>
<p>Some parameters expect a filename (e.g. <code>bathy</code>). While the model will accept any extension there are a couple of requirement. For spatially varying inputs, the extension controls how the file is read. You can use ESRI ascii grids <code>.asc</code>, mid-depth files <code>.md</code> or NetCDF <code>.nc</code>. NetCDF files are recommended and expected to have the <code>.nc</code> extension. Since NetCDF files can have several variables you can enforce (recommended) the variable being read by appending <code>?var</code> to the file name (e.g. <code>bathy = mybathyfile.nc?z</code>).</p>
<p>For spatially and temporally varying input (e.g. wind or atmospheric pressure) a/multiple NetCDF file with a 3D variable is expected (see <a href="#wind-atm-pressure-forcing">here</a>).</p>
<p>Where the file input is a timeserie (e.g. boundary forcing), then the file extension is ignored but a text file is expected.</p>
<h2 id="list-of-parameters">List of Parameters</h2>
<p>Remember that the only required parameter to run the model is the bathymetry file. But if you want to run something fun you will need to specify boundary conditions, initial conditions and/or some forcings.</p>
<p><a href="../ParametersList-py/">Full list of the parameters</a></p>
<h2 id="bathymetrytopography-files">Bathymetry/topography files</h2>
<p>Input bathymetry data as a regular grid using <code>.asc</code>, <code>.nc</code>, <code>.md</code>. This is a required parameter that ultimately also defines the extend of the model domain and model resolution (if not defined by the user).</p>
<p><code>bathy = My_bathy_file.asc</code></p>
<p>The correct way of reading the file will be dedicated by the file extension. For <code>.nc</code> (netcdf) files you can specify the name of the variable in the file as: <code>mybathyfile.nc?myvar</code> (will look for <code>zb</code> if none are specified). </p>
<p>This input file is critical as it defines the extent of the model grid and the base resolution in the model.</p>
<p><em>Note</em>: </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Different files can be provided to the code (using the instruction line multiple times). The code will use the last one having information at a given location when interpolating the data to create the bottom elevation (<code>zb</code>) variable.</p>
</div>
<h2 id="conputational-mesh">Conputational mesh</h2>
<div class="admonition info">
<p class="admonition-title">BG_Flood generates its own mesh</p>
</div>
<p>By default, it is a quad regular mesh based on the DEM (Digital Elevation Model) extend and resolution. 
The extend of the mesh and resolution of the mesh can be modify by the user. The mesh can also be refined/coarsen in areas or following patterns prescribed by the user.</p>
<h3 id="masking">Masking</h3>
<p>Parts of the input bathymetry can be masked and excluded from the computation. The model extent (and locations of side boundaries) will remain the same but entire blocks can be removed from the computational memory. These area will appear as NaN in the output file. The input grid is first devided in blocks of 16x16. If all the value within a block exceed the mask value (9999 as default) then that block is excluded from memory and no computation will occur there. An "area of interest" (AOI) can also be used to select a part of the domain. If none of the cells of a block is located in this area, that block will be excluded from memory.
The AOI is prefered other the mask method as the later can create waterfalls on the borders of the domain, specially if the rain-on-grid method is used.</p>
<p>There are no fancy treatment of the boundaries of masked blocks so it is safer to select a mask threshold (<code>mask</code>) to keep most of the masked are dry. If water tries to cross to a masked block, The boundary of blocks are treated as Neumann (no gradient) boundaries so the bathymetry of the 2 cells adjacent to a masked block are set to the same value (the value of the second cell removed from the masked block). </p>
<h2 id="boundaries">Boundaries</h2>
<p>Four type of boundaries can be applied at the edge of the model. By default neumann (no perpendicular gradient) is applied. </p>
<ul>
<li>0: No slip (wall)</li>
<li>1: Neumann</li>
<li>2: dirichlets (water level )</li>
<li>3: Absorbing (only 1D/perpendicular absorbion is implemented)</li>
<li>(4: 2D Absorbing (Not implemented yet))</li>
</ul>
<p>For Boundary type 2 and 3 (Dirichlet and Absorbing) the level at the boundary level is imposed from a file so a file needs to be sepcified:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>    left = 1;
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    right = mybndfile.txt,3;
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    top = mybndfile.txt,3;
</span></code></pre></div>
<h3 id="boundary-file-for-type-2-or-3">Boundary file (for type 2 or 3)</h3>
<p>Water level boundary file are needed to type 2 and 3 boundaries. The files are 2 (or more) columns, one with time in the first column and water level is the other(s). Note that the time step in the file doesn't need to be constant. The model will linearly interpolated between steps in the file. The file can be either comma separated or tab separated. This is automatically detected.</p>
<h4 id="uniform-boundary-file">Uniform boundary file</h4>
<p>For uniform boundary condition (along the boundary axis) the files needs to be 2 column:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>    # Water level boundary
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    0.0  1.2
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    3600.0  1.2
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    36000.0  1.22
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    36060.0  1.25
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    36120.0  1.24
</span></code></pre></div>
<h4 id="variable-boundary-file">Variable boundary file</h4>
<p>For Variable boundary condition (along the boundary axis) the files needs to be 3+ columns. The boundary axis is then divided by the number of boundary column and the water level is interpolated between location, for example:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>    # Water level boundary
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    0.0  1.2 0.0
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    3600.0  1.2 0.0
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    36000.0  1.22 0.0
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    36060.0  1.25 0.0
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    36120.0  1.24 0.0
</span></code></pre></div>
<p>Here the the water level on the near-end of the boundary (left for bottom and top bnds; bottom for left and right bnds) axis will vary between 1.2 and 1.25 but the far-end (right for bottom and top bnd and top for left and right bnds) will remain constant at 0.0.</p>
<p>Here is an example with 3 water level column:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>     # Water level boundary
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    0.0 0.0 1.2 0.0
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    3600.0 0.0 1.2 0.0
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    36000.0 0.0 1.2 0.0
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    36060.0 0.0 1.2 0.0
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    36120.0 0.0 1.2 0.0 
</span></code></pre></div>
<p>In this case both near and far end of the boundary axis will remain zero and the center of the boundary axis will be 1.2m. </p>
<p>There is no restriction in the number of columns. These values from each column will be forced uniformly spaced on the boundary and forcing in between will be linearly interpolated.</p>
<h2 id="bottom-friction">Bottom friction</h2>
<p>Bottom friction is applied implicitly in the model (applied to velocities after momentum and continuity equations are solved). 
There are 3 friction equations implemented defined in <code>BG_param.txt</code> as:</p>
<ul>
<li><code>frictionmodel = 0</code>: Basic Quadratic friction law (expecting the non-dimensional friction coefficient <span class="arithmatex">\(c_f\)</span> )</li>
<li><code>frictionmodel = 1</code>: Roughtness length model from Smart (expecting a <span class="arithmatex">\(z_0\)</span> parameter in <span class="arithmatex">\(c_f\)</span>)</li>
<li><code>frictionmodel = -1</code>: Manning's friction model (expecting a Manning n parameter <span class="arithmatex">\(c_f\)</span>)
Quadratic friction is the default, with a uniform friction coefficient:</li>
</ul>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>  frictionmodel = 0
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  cf = 0.001
</span></code></pre></div>
If a uniform friction is required add <code>cf=</code> to your <code>BG_param.txt</code> with the desired value. <code>cf</code> keyword is also used for the <span class="arithmatex">\(z0\)</span> of Smart formulation and <span class="arithmatex">\(n\)</span> of the Manning formulation. 
<p>For non-uniform friction parameter use the keyword  <code>cfmap</code> or <code>roughnessmap</code> and assign an <code>.asc</code> or <code>.nc</code> file. For nc files you may need to supply the netcdf variable name: e.g. <code>cfmap=final_rough.nc?zo</code>. The roughness grid does not need to match the model grid dimension and coarser friction grid will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value).</p>
<h2 id="rivers-and-area-discharge">Rivers and Area discharge</h2>
<p>At this stage river can only be added to the model as a vertical discharge where the water is added to a rectangle on the model with no velocity.
To add rivers add a line per river with the parameters: <code>river = Fluxfile,xstart,xend,ystart,yend;</code> where <code>Fluxfile</code> is a 2 column text file containing time and dicharge in <span class="arithmatex">\(m^3/s\)</span>; <code>xstart</code> is the left coordinate of the rectangle where the vertical discharge is applied, <code>xend</code> is the right coordinate of the rectangle, <code>ystart</code> is the bottom coordinate of the rectangle and <code>yend</code> is the top coordinate of the rectangle. 
Example:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>    river = Votualevu_R.txt,1867430,1867455,3914065,3914090;
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    river = Mulomulo_R.txt,1867052,1867072,3911853,3911873;
</span></code></pre></div>
<h2 id="wind-atm-pressure-forcing">Wind atm pressure forcing</h2>
<h3 id="wind-forcing-may-contain-bugs">Wind forcing (may contain bugs)</h3>
<p>The hydrodynamics can be forced using a linear wind drag. the linear drag can be influenced with the keyword <code>Cd</code>. Wind input is defined with the keyword <code>windfiles</code>. There are several ways to use the keyword.</p>
<h4 id="spatially-uniform-txt-file">spatially uniform txt file:</h4>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>windfiles=mywind.txt
</span></code></pre></div>
where <code>mywind.txt</code> is a text file with 3 column (time (<span class="arithmatex">\(s\)</span>), wind speed (<span class="arithmatex">\(m/s\)</span>) and wind direction (<span class="arithmatex">\(\,^{{\circ}}\)</span> North)). If the grid is in acoordinate system rotated from the north and a <code>grdalpha</code> is specified, the wind will be automatically rotated to the grid orientation. 
<h4 id="spatially-and-time-varying-input">Spatially and time varying input</h4>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>windfiles=mywind.nc?uw,mywind.nc?vw
</span></code></pre></div>
Here two arguments separated with a comma are expected. The first argument is the netcdf file and variable name containing the U component of the wind (along the X axis) and the second argument is the netcdf file and variable name containing the V component of the wind (along the Y axis). Both can be in the same netcdf file as in the example or in separate netcdf files (add the variable name with a <code>?</code> similarly to other netcdf input options). The dimension of the wind forcing grid does not need to match the model grid dimension and coarser forcing will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value). 
<h3 id="atmospheric-pressure-forcing">Atmospheric pressure forcing</h3>
<p>Spatially constant atmospheric pressure forcing is not relevant so only spatially varying forcing is feasable. Like for the wind this is done through a netcdf file:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>atmpfile=myncfile.nc?atmpres
</span></code></pre></div>
The forcing pressure is expected to be in Pa and the effect of the atmospheric pressure gradient is calculated as the difference to a reference pressure <code>Paref=101300.0</code> converted to a height using <code>Pa2m=0.00009916</code>. If using hPa your will need to also change the reference pressure to <code>Paref=1013.0</code> and the conversion parameter to <code>Pa2m=0.009916</code>. As with the  wind forcing, the forcing grid does not need to match the model grid dimension and coarser forcing will be interpolated to the model grid cells and model cells outside of the forcing domain will be extrapolated (nearest value). 
<h2 id="outputs">Outputs</h2>
<p>There is two types of outputs:
 - map outputs of 2D variables regularly through time.
 - time-series output of basic values, at a chosen position, at each time step.</p>
<h3 id="map-outputs">Map outputs</h3>
<p>These maps are output as a nc file, with information on coordinates and blocks.</p>
<p>The map output can be modify by:
- defining a timestep (in <span class="arithmatex">\(s\)</span>) for these outputs:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>outputtimestep = 3600.0;
</span></code></pre></div>
- changing the set of variables in the output file (from the list given in the manual)
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>outvars = zs,h,u,v,zb,hmax,Umax,hUmax,twet;
</span></code></pre></div>
- changing the name of the output file:
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>outfile = Results_tuto_basicRun.nc;
</span></code></pre></div>
<ul>
<li>choosing one or more zones to outputs (by default, the full domain is output):
 <code>{txt}
outzone=MyZoneName.nc,x1,x2,y1,y2;
outzone=MyZoneNameb.nc,x1b,x2b,y1b,y2b;</code> </li>
<li>saving the output as float (variables are saved as short integer by default.):
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>smallnc = 0;
</span></code></pre></div></li>
</ul>
<p>By default, the variables outputs are the one listed in the following paragraph: Default snapshot outputs.</p>
<h4 id="default-snapshot-outputs">Default snapshot outputs</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>u</td>
<td style="text-align: center;">U  velocity (at cell center) zonal velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>v</td>
<td style="text-align: center;">V  velocity (at cell center) meridional velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>h</td>
<td style="text-align: center;">water depth at cell center</td>
<td style="text-align: right;">[m]</td>
</tr>
<tr>
<td>zs</td>
<td style="text-align: center;">Water level elevation above datum</td>
<td style="text-align: right;">[m]</td>
</tr>
<tr>
<td>zb</td>
<td style="text-align: center;">Topography elevation above datum</td>
<td style="text-align: right;">[m]</td>
</tr>
</tbody>
</table>
<h4 id="complementary-variables">Complementary variables</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>vort</td>
<td style="text-align: center;">Vorticity</td>
<td style="text-align: right;">[rotation/s]</td>
</tr>
<tr>
<td>cf</td>
<td style="text-align: center;">Bottom friction coefficient (Manning n or z0)</td>
<td style="text-align: right;">varies with model used</td>
</tr>
</tbody>
</table>
<h4 id="meanaveraged-output-between-output-steps">Mean/averaged output between output steps</h4>
<p>This is for averaging variables in between output steps, useful for mean tidal flow calculation that averages out vortices. The average time is <code>outtimestep</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>umean</td>
<td style="text-align: center;">Averaged u  velocity (at cell center) zonal velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>vmean</td>
<td style="text-align: center;">Averaged v  velocity (at cell center) meridional velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>hmean</td>
<td style="text-align: center;">Averaged water depth at cell center</td>
<td style="text-align: right;">[m]</td>
</tr>
<tr>
<td>zsmean</td>
<td style="text-align: center;">Averaged Water level elevation above datum</td>
<td style="text-align: right;">[m]</td>
</tr>
</tbody>
</table>
<h4 id="max-output">Max output</h4>
<p>The max can be calculated for the overall simulation (default) or between output steps ( if <code>resetmax = 1;</code>)</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>umax</td>
<td style="text-align: center;">Maximum u  velocity (at cell center) zonal velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>vmax</td>
<td style="text-align: center;">Maximum v  velocity (at cell center) meridional velocity positive right</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>hmax</td>
<td style="text-align: center;">Maximum water depth at cell center</td>
<td style="text-align: right;">[m]</td>
</tr>
<tr>
<td>zsmax</td>
<td style="text-align: center;">Maximum Water level elevation above datum</td>
<td style="text-align: right;">[m]</td>
</tr>
</tbody>
</table>
<h4 id="risk-assesment-related-output">Risk assesment related output</h4>
<p>These variables are used to evaluate the damage resulting from the innundation (as a complement to hmax for example).</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>hUmax</td>
<td style="text-align: center;">Maximum of h time the velocity (U for amplitude of (u,v))</td>
<td style="text-align: right;">[m2/s]</td>
</tr>
<tr>
<td>Umax</td>
<td style="text-align: center;">Maximum of the velocity (U for amplitude of (u,v))</td>
<td style="text-align: right;">[m/s]</td>
</tr>
<tr>
<td>twet</td>
<td style="text-align: center;">Duration innundation of the cell in s (h&gt;0.1m)</td>
<td style="text-align: right;">[s]</td>
</tr>
</tbody>
</table>
<h4 id="model-related-outputs">Model related outputs</h4>
<p>These outputs  will be produce only if the associated model/forcing is used.</p>
<p>If an atmospheric forcing is used:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Patm</td>
<td style="text-align: center;">Atmospheric pressure</td>
<td style="text-align: right;">[Pa]</td>
</tr>
<tr>
<td>datmpdx/datmpdy</td>
<td style="text-align: center;">Gradients of atmospheric pressure</td>
<td style="text-align: right;">[Pa/m]</td>
</tr>
</tbody>
</table>
<p>If the infiltration model (ILCL) is used, the quantity of water that infiltrate in the ground is saved, as a cumulated value in hgw.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>il</td>
<td style="text-align: center;">Initial loss coefficient</td>
<td style="text-align: right;">[mm]</td>
</tr>
<tr>
<td>cl</td>
<td style="text-align: center;">Continuous loss coefficient</td>
<td style="text-align: right;">[mm/hr]</td>
</tr>
<tr>
<td>hgw</td>
<td style="text-align: center;">Cumulated height of infiltrated water in the ground</td>
<td style="text-align: right;">[m]</td>
</tr>
</tbody>
</table>
<h4 id="other-gradients-and-intermediate-terms-of-the-equations">Other gradients and intermediate terms of the equations</h4>
<p>Terms of the equation can also been output such as the gradients (for error tracking mainly):</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align: center;">Definition</th>
<th style="text-align: right;">Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>dhdx / dhdy</td>
<td style="text-align: center;">Gradient of water elevation (h) in the x and y direction respectively</td>
<td style="text-align: right;">[]</td>
</tr>
<tr>
<td>dzsdx / dzsdy</td>
<td style="text-align: center;">Gradient of the water surface (zs) in the x and y direction respectively</td>
<td style="text-align: right;">[]</td>
</tr>
<tr>
<td>dudx / dudy</td>
<td style="text-align: center;">Gradient of x-velocity (u) in the x and y direction respectively</td>
<td style="text-align: right;">[s-1]</td>
</tr>
<tr>
<td>dvdx / dvdy</td>
<td style="text-align: center;">Gradient of y-velocity (v) in the x and y direction respectively</td>
<td style="text-align: right;">[s-1]</td>
</tr>
<tr>
<td>Fhu / Fhv</td>
<td style="text-align: center;">Flux of h time u in the x and y direction respectively</td>
<td style="text-align: right;">[m2/s2]</td>
</tr>
<tr>
<td>Fqux / Fqvx</td>
<td style="text-align: center;">XXXXXXXXXXXX</td>
<td style="text-align: right;">[XXX]</td>
</tr>
<tr>
<td>Su / Sv</td>
<td style="text-align: center;">Topographic source term</td>
<td style="text-align: right;">[XXX]</td>
</tr>
<tr>
<td>dh</td>
<td style="text-align: center;">Variation in elevation</td>
<td style="text-align: right;">[m]</td>
</tr>
<tr>
<td>du / dv</td>
<td style="text-align: center;">Variation of the x- and y-velocity respectively</td>
<td style="text-align: right;">[m/s]</td>
</tr>
</tbody>
</table>
<h3 id="point-or-time-serie-output">Point or Time-Serie output</h3>
<p>For each Time-Serie output needed, a line with the destination file and the postition is needed:</p>
<p></p><div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>TSnodesout=Offshore.txt,xloc,yloc;
</span></code></pre></div>
The file contains 5 colums <span class="arithmatex">\((t, zs, h, u,v)\)</span> with the value at the nearest grid point (to the position defined by the user).
<h2 id="adaptative-grid">Adaptative grid</h2>
<p>At the stage of development, the code will adapt the grid only before the computation but not along the calcul.</p>
<p>The code is based on a Block-uniform quadtree mesh. Each block, actually a 16 by 16 cells, is one unit of computation in the GPU.
These blocks can have different resolutions (but the resolution does not change during the computation at this stage).</p>
<p>By default, the initial resolution of the grid is the resolution of the bathymetry/topographic data. To refine or coarsen the grid, you can weather use the <code>dx</code> key word and choose a new resolution for the whole domain; wether use different levels of resolution. 
The reference level, correponding to the bathymetry resolution or <span class="arithmatex">\(dx\)</span> if defined by the user, will be the level 0. Levels of resolution are then defined in relation to the reference levels using positive integers to increase the resolution or refine and negative integer to coarsen the grid by a multiple of two. For a given level  <span class="arithmatex">\(n\)</span> , the resolution  <span class="arithmatex">\(dx_n\)</span>
  will be:
$$
dx_n=$rac{dx_0}{2^n}
$$</p>
<p>with  <span class="arithmatex">\(dx_0\)</span> the resolution at level 0. </p>
<p>When refinning using the level implementation, different key words are expected:</p>
<ul>
<li><code>Initlevel</code>: level used to create the first mesh created by the code in the mesh refinement process (only a technical information)</li>
<li><code>Maxlevel</code>: maximim level of refinement (over-ruling other commands)</li>
<li><code>Minlevel</code>: minimum level of refinement (over-ruling other commands)</li>
</ul>
<p>The grid can also be unregular with an adaptition of the grid to the model (variables at initialisation step or user-defined refinement map). In this case, the cells will be devided in 4 cells for refinement, or 4 cells merged in one for coarsening. The code will ensure a progressive change of resolution (no cell should have a neighbour with more than 1 level of resolution of difference.)</p>
<p>The different methods of refinement available in the code are called using the key word "Adaptation". The refinement can be based on a classical input variable or a variable calculated during the initialisation:</p>
<ul>
<li><code>Threshold</code>: impose a threshold for a different level of resolution</li>
<li><code>Inrange</code>: impose a range for a different level of resolution</li>
<li><code>Targetlevel</code>: the levels of resolution will be targeted but will be overruled by the maxlevel, minlevel entrance.</li>
</ul>
<p>For example, for the adaptation with targeted levels:
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>initlevel = init ;
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>maxlevel =  max ;
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>minlevel = min ;
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>Adaptation = Targetlevel,MyLevelMap.nc?levels ;
</span></code></pre></div>
Where max and min represent the range of level expected, and init is a number in this range (it is advice to use the min level). MyLevelMap is a netcdf 2D map of levels, that can have a different resolution and dimension from the computational grid. The amplitude of the levels on the map can also be larger than than min/max. All these levels are positive or negative integer.
<p>For a bathymetry map of <span class="arithmatex">\(10\)</span>m resolution ( or <code>dx=10</code>), we can use <code>minlevel=-3</code>, <code>maxlevel=2</code> and <code>initlevel=-3</code> to create a grid where coarser cell will be <span class="arithmatex">\(10/2^{-3}=80\)</span>m and the thinner <span class="arithmatex">\(10/2^2=2.5\)</span>m. The level file would contains a 2D map with integer values from -3 to 2.</p></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "toc.integrate", "content.code.copy", "content.code.select"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>